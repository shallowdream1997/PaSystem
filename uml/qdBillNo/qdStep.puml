
@startuml
start

:业务进入寄卖清单竞标页面;

if (批量发布?) then (是)
    :进入发布清单接口;

    if (读取发布配置，判断是否属于发布日期范围内\n还要判断是否为待发布or发布中状态?) then (是)
        :更新状态 = 30(发布中)\n按轮次增加轮次\n初始化竞标编号;

         if (发布时间结束?) then (是)
                        if (有寄卖商参与投标?) then (是)
                            :更新审批状态 = 40(待分配);

                            if (寄卖商分配完成?) then (是)
                                :更新审批状态 = 50(分配完成);

                                if (寄卖商弃单 or 指定错误?) then (是)
                                    :更新审批状态 = 100(已作废);
                                else (否)
                                    :继续执行后续操作;
                                endif
                            else (否)
                                :等待分配完成;
                            endif
                        else (否)
                            if (根据配置重新发布?) then (是)
                                :更新审批状态 = 30(发布中);
                                :修改发布时间和新增轮次;
                            else (否)
                                :更新审批状态 = 100(已作废);
                            endif
                        endif
                    else (否)
                        :继续等待发布时间结束;
                    endif
        else (否)

        endif
        stop



else (否)
endif

stop
@enduml